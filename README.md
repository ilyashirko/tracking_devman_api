# Отслеживание прогресса обучения в [DEVMAN](https://dvmn.org)
Телеграм бот проверяющий в режиме реального времени прогресс ученика Devman и присылающий уведомление в телеграм в случае проверки очередного урока.
## Запуск бота
Для запуска бота необходимо клонировать репозиторий:
```
git clone https://github.com/ilyashirko/tracking_devman_api
```
Переместиться в корневую папку проекта и создать виртуальное окружение:
```
cd tracking_devman_api && python3 -m venv env
```
Активировать виртуальное окружение и установить зависимости:
```
source env/bin/activate && pip3 install -r requirements.txt
```
Поместить чувствительные данные в `.env` файл. Вам потребуются:  
1. Токен вашего телеграм бота. Создать бота и получить токен можно [здесь](BotFather)  
2. Токен вашей учетной записи в [DEVMAN](https://dvmn.org/api/docs/)  
3. Ваш Chat_id. получить его можно [здесь](https://t.me/userinfobot)  

Оформите ваши личные данные в файле `.env`:
```
DEVMAN_TOKEN=
TELEGRAM_TOKEN=
TELEGRAM_USER_ID=
```
По умолчанию логи пишутся в файл `log.log`.  
Если хотите указать свой файл - можете добавить переменную окружения `LOG_FILENAME=` 
   
Для запуска бота введите в командной строке:
```
python3 tracking_devman_api.py
```
В случае получение вами результата проверки, он будет отправлен в бот.  
В случае ошибок, содержание ошибки будет направлено в бота и в лог-файл.

## Развернуть Docker контейнер
Для развертывания контейнера вам потребуется [docker](https://docs.docker.com/get-docker/).  
Вам необходимо клонировать репозиторий, войти в корневую директорию и создать .env файл с чувствительными данными как описано в инструкции выше.  
Активировать виртуальное окружение и устанавливать зависимости не надо, docker сделает это сам.  
Также необходимо создать файл `log.log`, чтобы при завершении контейнера логи не стирались вместе с ним, файл с логами мы примонтируем к контейнеру.  
Соберите контейнер командой находясь в корневой папке проекта:
```
docker build -t dvmn-tracker .
```
> вместо `dvmn-tracker` можете указать любое другое название образа.  
> не забудьте точку в конце - это путь до `Dockerfile`.

запустите контейнер:
```
docker run -dp 3000:3000 --env-file ./.env -v $(pwd)/log.log:/log.log dvmn-tracker
```
вы можете изменить порт для запуска и указать другие точки монтирования (названия) для монтируемых файлов.